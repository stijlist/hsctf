#!/usr/bin/env ruby
require 'dante'
$LOAD_PATH.unshift("#{File.dirname(__FILE__)}/../lib")
require 'hsctf'

env_file = File.join(File.dirname(__FILE__), '../config', 'env.yml')
YAML.load(File.open(env_file)).each do |key, value|
  ENV[key.to_s] = value
end if File.exists?(env_file)

TMP_PATH  = "#{File.dirname(__FILE__)}/../tmp"
LOG_PATH  = "#{File.dirname(__FILE__)}/../logs"

opts = { pid_path: "#{TMP_PATH}/hsctf.pid",
         log_path: "#{LOG_PATH}/hsctf.log"}
Dante.run('hsctf', opts) do |opts|
  run CTF.new
end
