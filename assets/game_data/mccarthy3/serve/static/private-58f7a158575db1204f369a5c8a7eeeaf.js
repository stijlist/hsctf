function closeNoteBox(t){t.find(".note-box").hide(),t.find("a.add-note").show(),t.find("textarea").val("").off("focus"),$(document).off("scroll"),$("html, body").scrollTop(t.offset().top)}!function(t){"use strict";function e(t){if(t){if("string"==typeof i[t])return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var e,s=0,o=n.length;o>s;s++)if(e=n[s]+t,"string"==typeof i[e])return e}}var n="Webkit Moz ms Ms O".split(" "),i=document.documentElement.style;"function"==typeof define&&define.amd?define(function(){return e}):t.getStyleProperty=e}(window),function(t){"use strict";function e(t){var e=parseFloat(t),n=-1===t.indexOf("%")&&!isNaN(e);return n&&e}function n(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,n=a.length;n>e;e++){var i=a[e];t[i]=0}return t}function i(t){function i(t){if("string"==typeof t&&(t=document.querySelector(t)),t&&"object"==typeof t&&t.nodeType){var i=o(t);if("none"===i.display)return n();var c={};c.width=t.offsetWidth,c.height=t.offsetHeight;for(var l=c.isBorderBox=!(!r||!i[r]||"border-box"!==i[r]),u=0,p=a.length;p>u;u++){var h=a[u],d=i[h],m=parseFloat(d);c[h]=isNaN(m)?0:m}var f=c.paddingLeft+c.paddingRight,y=c.paddingTop+c.paddingBottom,g=c.marginLeft+c.marginRight,v=c.marginTop+c.marginBottom,b=c.borderLeftWidth+c.borderRightWidth,R=c.borderTopWidth+c.borderBottomWidth,O=l&&s,M=e(i.width);M!==!1&&(c.width=M+(O?0:f+b));var S=e(i.height);return S!==!1&&(c.height=S+(O?0:y+R)),c.innerWidth=c.width-(f+b),c.innerHeight=c.height-(y+R),c.outerWidth=c.width+g,c.outerHeight=c.height+v,c}}var s,r=t("boxSizing");return function(){if(r){var t=document.createElement("div");t.style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style[r]="border-box";var n=document.body||document.documentElement;n.appendChild(t);var i=o(t);s=200===e(i.width),n.removeChild(t)}}(),i}var s=document.defaultView,o=s&&s.getComputedStyle?function(t){return s.getComputedStyle(t,null)}:function(t){return t.currentStyle},a=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define(["get-style-property/get-style-property"],i):t.getSize=i(t.getStyleProperty)}(window),function(t){"use strict";var e=document.documentElement,n=function(){};e.addEventListener?n=function(t,e,n){t.addEventListener(e,n,!1)}:e.attachEvent&&(n=function(e,n,i){e[n+i]=i.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,i.handleEvent.call(i,e)}:function(){var n=t.event;n.target=n.target||n.srcElement,i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var i=function(){};e.removeEventListener?i=function(t,e,n){t.removeEventListener(e,n,!1)}:e.detachEvent&&(i=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var s={bind:n,unbind:i};"function"==typeof define&&define.amd?define(s):t.eventie=s}(this),function(t){"use strict";function e(t){"function"==typeof t&&(e.isReady?t():o.push(t))}function n(t){var n="readystatechange"===t.type&&"complete"!==s.readyState;if(!e.isReady&&!n){e.isReady=!0;for(var i=0,a=o.length;a>i;i++){var r=o[i];r()}}}function i(i){return i.bind(s,"DOMContentLoaded",n),i.bind(s,"readystatechange",n),i.bind(t,"load",n),e}var s=t.document,o=[];e.isReady=!1,"function"==typeof define&&define.amd?(e.isReady="function"==typeof requirejs,define(["eventie/eventie"],i)):t.docReady=i(t.eventie)}(this),function(){"use strict";function t(){}function e(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}var i=t.prototype;i.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.flattenListeners=function(t){var e,n=[];for(e=0;t.length>e;e+=1)n.push(t[e].listener);return n},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,n){var i,s=this.getListenersAsObject(t),o="object"==typeof n;for(i in s)s.hasOwnProperty(i)&&-1===e(s[i],n)&&s[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;t.length>e;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,n){var i,s,o=this.getListenersAsObject(t);for(s in o)o.hasOwnProperty(s)&&(i=e(o[s],n),-1!==i&&o[s].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,s,o=t?this.removeListener:this.addListener,a=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(s=e[i])&&("function"==typeof s?o.call(this,i,s):a.call(this,i,s));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.emitEvent=function(t,e){var n,i,s,o,a=this.getListenersAsObject(t);for(s in a)if(a.hasOwnProperty(s))for(i=a[s].length;i--;)n=a[s][i],n.once===!0&&this.removeListener(t,n.listener),o=n.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},i.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:this.EventEmitter=t}.call(this),function(t){"use strict";function e(){}function n(t){function n(e){e.prototype.option||(e.prototype.option=function(e){t.isPlainObject(e)&&(this.options=t.extend(!0,this.options,e))})}function s(e,n){t.fn[e]=function(s){if("string"==typeof s){for(var a=i.call(arguments,1),r=0,c=this.length;c>r;r++){var l=this[r],u=t.data(l,e);if(u)if(t.isFunction(u[s])&&"_"!==s.charAt(0)){var p=u[s].apply(u,a);if(void 0!==p)return p}else o("no such method '"+s+"' for "+e+" instance");else o("cannot call methods on "+e+" prior to initialization; attempted to call '"+s+"'")}return this}return this.each(function(){var i=t.data(this,e);i?(i.option(s),i._init()):(i=new n(this,s),t.data(this,e,i))})}}if(t){var o="undefined"==typeof console?e:function(t){console.error(t)};t.bridget=function(t,e){n(e),s(t,e)}}}var i=Array.prototype.slice;"function"==typeof define&&define.amd?define(["jquery"],n):n(t.jQuery)}(window),function(t,e){"use strict";function n(t,e){return t[r](e)}function i(t){if(!t.parentNode){var e=document.createDocumentFragment();e.appendChild(t)}}function s(t,e){i(t);for(var n=t.parentNode.querySelectorAll(e),s=0,o=n.length;o>s;s++)if(n[s]===t)return!0;return!1}function o(t,e){return i(t),n(t,e)}var a,r=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],n=0,i=t.length;i>n;n++){var s=t[n],o=s+"MatchesSelector";if(e[o])return o}}();if(r){var c=document.createElement("div"),l=n(c,"div");a=l?n:o}else a=s;"function"==typeof define&&define.amd?define(function(){return a}):window.matchesSelector=a}(this,Element.prototype),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){for(var e in t)return!1;return e=null,!0}function i(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function s(t,s,o){function r(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var c=o("transition"),l=o("transform"),u=c&&l,p=!!o("perspective"),h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[c],d=["transform","transition","transitionDuration","transitionProperty"],m=function(){for(var t={},e=0,n=d.length;n>e;e++){var i=d[e],s=o(i);s&&s!==i&&(t[i]=s)}return t}();e(r.prototype,t.prototype),r.prototype._create=function(){this._transition={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},r.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},r.prototype.getSize=function(){this.size=s(this.element)},r.prototype.css=function(t){var e=this.element.style;for(var n in t){var i=m[n]||n;e[i]=t[n]}},r.prototype.getPosition=function(){var t=a(this.element),e=this.layout.options,n=e.isOriginLeft,i=e.isOriginTop,s=parseInt(t[n?"left":"right"],10),o=parseInt(t[i?"top":"bottom"],10);s=isNaN(s)?0:s,o=isNaN(o)?0:o;var r=this.layout.size;s-=n?r.paddingLeft:r.paddingRight,o-=i?r.paddingTop:r.paddingBottom,this.position.x=s,this.position.y=o},r.prototype.layoutPosition=function(){var t=this.layout.size,e=this.layout.options,n={};e.isOriginLeft?(n.left=this.position.x+t.paddingLeft+"px",n.right=""):(n.right=this.position.x+t.paddingRight+"px",n.left=""),e.isOriginTop?(n.top=this.position.y+t.paddingTop+"px",n.bottom=""):(n.bottom=this.position.y+t.paddingBottom+"px",n.top=""),this.css(n),this.emitEvent("layout",[this])};var f=p?function(t,e){return"translate3d("+t+"px, "+e+"px, 0)"}:function(t,e){return"translate("+t+"px, "+e+"px)"};r.prototype._transitionTo=function(t,e){this.getPosition();var n=this.position.x,i=this.position.y,s=parseInt(t,10),o=parseInt(e,10),a=s===this.position.x&&o===this.position.y;if(this.setPosition(t,e),a&&!this.isTransitioning)return void this.layoutPosition();var r=t-n,c=e-i,l={},u=this.layout.options;r=u.isOriginLeft?r:-r,c=u.isOriginTop?c:-c,l.transform=f(r,c),this.transition({to:l,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},r.prototype.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},r.prototype.moveTo=u?r.prototype._transitionTo:r.prototype.goTo,r.prototype.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},r.prototype._nonTransition=function(t){this.css(t.to),t.isCleaning&&this._removeStyles(t.to);for(var e in t.onTransitionEnd)t.onTransitionEnd[e].call(this)},r.prototype._transition=function(t){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(t);var e=this._transition;for(var n in t.onTransitionEnd)e.onEnd[n]=t.onTransitionEnd[n];for(n in t.to)e.ingProperties[n]=!0,t.isCleaning&&(e.clean[n]=!0);if(t.from){this.css(t.from);var i=this.element.offsetHeight;i=null}this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0};var y=l&&i(l)+",opacity";r.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(h,this,!1))},r.prototype.transition=r.prototype[c?"_transition":"_nonTransition"],r.prototype.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},r.prototype.onotransitionend=function(t){this.ontransitionend(t)};var g={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};r.prototype.ontransitionend=function(t){if(t.target===this.element){var e=this._transition,i=g[t.propertyName]||t.propertyName;if(delete e.ingProperties[i],n(e.ingProperties)&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd){var s=e.onEnd[i];s.call(this),delete e.onEnd[i]}this.emitEvent("transitionEnd",[this])}},r.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(h,this,!1),this.isTransitioning=!1},r.prototype._removeStyles=function(t){var e={};for(var n in t)e[n]="";this.css(e)};var v={transitionProperty:"",transitionDuration:""};return r.prototype.removeTransitionStyles=function(){this.css(v)},r.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},r.prototype.remove=function(){if(!c||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var t=this;this.on("transitionEnd",function(){return t.removeElem(),!0}),this.hide()},r.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options;this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0})},r.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options;this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.css({display:"none"})}}})},r.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},r}var o=document.defaultView,a=o&&o.getComputedStyle?function(t){return o.getComputedStyle(t,null)}:function(t){return t.currentStyle};"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],s):(t.Outlayer={},t.Outlayer.Item=s(t.EventEmitter,t.getSize,t.getStyleProperty))}(window),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===p.call(t)}function i(t){var e=[];if(n(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0,s=t.length;s>i;i++)e.push(t[i]);else e.push(t);return e}function s(t,e){var n=d(e,t);-1!==n&&e.splice(n,1)}function o(t){return t.replace(/(.)([A-Z])/g,function(t,e,n){return e+"-"+n}).toLowerCase()}function a(n,a,p,d,m,f){function y(t,n){if("string"==typeof t&&(t=r.querySelector(t)),!t||!h(t))return void(c&&c.error("Bad "+this.settings.namespace+" element: "+t));this.element=t,this.options=e({},this.options),this.option(n);var i=++v;this.element.outlayerGUID=i,b[i]=this,this._create(),this.options.isInitLayout&&this.layout()}function g(t,n){t.prototype[n]=e({},y.prototype[n])}var v=0,b={};return y.prototype.settings={namespace:"outlayer",item:f},y.prototype.options={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e(y.prototype,p.prototype),y.prototype.option=function(t){e(this.options,t)},y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},y.prototype._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.settings.item,i=[],s=0,o=e.length;o>s;s++){var a=e[s],r=new n(a,this);i.push(r)}return i},y.prototype._filterFindItemElements=function(t){t=i(t);for(var e=this.options.itemSelector,n=[],s=0,o=t.length;o>s;s++){var a=t[s];if(h(a))if(e){m(a,e)&&n.push(a);for(var r=a.querySelectorAll(e),c=0,l=r.length;l>c;c++)n.push(r[c])}else n.push(a)}return n},y.prototype.getItemElements=function(){for(var t=[],e=0,n=this.items.length;n>e;e++)t.push(this.items[e].element);return t},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var t=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,t),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=d(this.element)},y.prototype._getMeasurement=function(t,e){var n,i=this.options[t];i?("string"==typeof i?n=this.element.querySelector(i):h(i)&&(n=i),this[t]=n?d(n)[e]:i):this[t]=0},y.prototype.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},y.prototype._getItemsForLayout=function(t){for(var e=[],n=0,i=t.length;i>n;n++){var s=t[n];s.isIgnored||e.push(s)}return e},y.prototype._layoutItems=function(t,e){if(!t||!t.length)return void this.emitEvent("layoutComplete",[this,t]);this._itemsOn(t,"layout",function(){this.emitEvent("layoutComplete",[this,t])});for(var n=[],i=0,s=t.length;s>i;i++){var o=t[i],a=this._getItemLayoutPosition(o);a.item=o,a.isInstant=e,n.push(a)}this._processLayoutQueue(n)},y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(t){for(var e=0,n=t.length;n>e;e++){var i=t[e];this._positionItem(i.item,i.x,i.y,i.isInstant)}},y.prototype._positionItem=function(t,e,n,i){i?t.goTo(e,n):t.moveTo(e,n)},y.prototype._postLayout=function(){var t=this._getContainerSize();t&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},y.prototype._getContainerSize=u,y.prototype._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},y.prototype._itemsOn=function(t,e,n){function i(){return s++,s===o&&n.call(a),!0}for(var s=0,o=t.length,a=this,r=0,c=t.length;c>r;r++){var l=t[r];l.on(e,i)}},y.prototype.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},y.prototype.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},y.prototype.stamp=function(t){if(t=this._find(t)){this.stamps=this.stamps.concat(t);for(var e=0,n=t.length;n>e;e++){var i=t[e];this.ignore(i)}}},y.prototype.unstamp=function(t){if(t=this._find(t))for(var e=0,n=t.length;n>e;e++){var i=t[e];s(i,this.stamps),this.unignore(i)}},y.prototype._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),t=i(t)):void 0},y.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var t=0,e=this.stamps.length;e>t;t++){var n=this.stamps[t];this._manageStamp(n)}}},y.prototype._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},y.prototype._manageStamp=u,y.prototype._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,i=d(t),s={left:e.left-n.left-i.marginLeft,top:e.top-n.top-i.marginTop,right:n.right-e.right-i.marginRight,bottom:n.bottom-e.bottom-i.marginBottom};return s},y.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},y.prototype.bindResize=function(){this.isResizeBound||(n.bind(t,"resize",this),this.isResizeBound=!0)},y.prototype.unbindResize=function(){n.unbind(t,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function t(){e.resize(),delete e.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var e=this;this.resizeTimeout=setTimeout(t,100)},y.prototype.resize=function(){var t=d(this.element),e=this.size&&t;e&&t.innerWidth===this.size.innerWidth||this.layout()},y.prototype.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},y.prototype.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},y.prototype.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},y.prototype.reveal=function(t){if(t&&t.length)for(var e=0,n=t.length;n>e;e++){var i=t[e];i.reveal()}},y.prototype.hide=function(t){if(t&&t.length)for(var e=0,n=t.length;n>e;e++){var i=t[e];i.hide()}},y.prototype.getItem=function(t){for(var e=0,n=this.items.length;n>e;e++){var i=this.items[e];if(i.element===t)return i}},y.prototype.getItems=function(t){if(t&&t.length){for(var e=[],n=0,i=t.length;i>n;n++){var s=t[n],o=this.getItem(s);o&&e.push(o)}return e}},y.prototype.remove=function(t){t=i(t);var e=this.getItems(t);if(e&&e.length){this._itemsOn(e,"remove",function(){this.emitEvent("removeComplete",[this,e])});for(var n=0,o=e.length;o>n;n++){var a=e[n];a.remove(),s(a,this.items)}}},y.prototype.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="";for(var e=0,n=this.items.length;n>e;e++){var i=this.items[e];i.destroy()}this.unbindResize(),delete this.element.outlayerGUID,l&&l.removeData(this.element,this.settings.namespace)},y.data=function(t){var e=t&&t.outlayerGUID;return e&&b[e]},y.create=function(t,n){function i(){y.apply(this,arguments)}return e(i.prototype,y.prototype),g(i,"options"),g(i,"settings"),e(i.prototype.options,n),i.prototype.settings.namespace=t,i.data=y.data,i.Item=function(){f.apply(this,arguments)},i.Item.prototype=new f,i.prototype.settings.item=i.Item,a(function(){for(var e=o(t),n=r.querySelectorAll(".js-"+e),s="data-"+e+"-options",a=0,u=n.length;u>a;a++){var p,h=n[a],d=h.getAttribute(s);try{p=d&&JSON.parse(d)}catch(m){c&&c.error("Error parsing "+s+" on "+h.nodeName.toLowerCase()+(h.id?"#"+h.id:"")+": "+m);continue}var f=new i(h,p);l&&l.data(h,t,f)}}),l&&l.bridget&&l.bridget(t,i),i},y.Item=f,y}var r=t.document,c=t.console,l=t.jQuery,u=function(){},p=Object.prototype.toString,h="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"==typeof t&&1===t.nodeType&&"string"==typeof t.nodeName},d=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1};"function"==typeof define&&define.amd?define(["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],a):t.Outlayer=a(t.eventie,t.docReady,t.EventEmitter,t.getSize,t.matchesSelector,t.Outlayer.Item)}(window),function(t){"use strict";function e(t,e){var i=t.create("masonry");return i.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var t=this.cols;for(this.colYs=[];t--;)this.colYs.push(0);this.maxY=0},i.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var t=this.items[0],n=t&&t.element;this.columnWidth=n&&e(n).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},i.prototype.getContainerWidth=function(){var t=this.options.isFitWidth?this.element.parentNode:this.element,n=e(t);this.containerWidth=n&&n.innerWidth},i.prototype._getItemLayoutPosition=function(t){t.getSize();var e=Math.ceil(t.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var i=this._getColGroup(e),s=Math.min.apply(Math,i),o=n(i,s),a={x:this.columnWidth*o,y:s},r=s+t.size.outerHeight,c=this.cols+1-i.length,l=0;c>l;l++)this.colYs[o+l]=r;return a},i.prototype._getColGroup=function(t){if(2>t)return this.colYs;for(var e=[],n=this.cols+1-t,i=0;n>i;i++){var s=this.colYs.slice(i,i+t);e[i]=Math.max.apply(Math,s)}return e},i.prototype._manageStamp=function(t){var n=e(t),i=this._getElementOffset(t),s=this.options.isOriginLeft?i.left:i.right,o=s+n.outerWidth,a=Math.floor(s/this.columnWidth);a=Math.max(0,a);var r=Math.floor(o/this.columnWidth);r=Math.min(this.cols-1,r);for(var c=(this.options.isOriginTop?i.top:i.bottom)+n.outerHeight,l=a;r>=l;l++)this.colYs[l]=Math.max(c,this.colYs[l])},i.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this.options.isFitWidth&&(t.width=this._getContainerFitWidth()),t},i.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},i.prototype.resize=function(){var t=this.containerWidth;this.getContainerWidth(),t!==this.containerWidth&&this.layout()},i}var n=Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n=0,i=t.length;i>n;n++){var s=t[n];if(s===e)return n}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):t.Masonry=e(t.Outlayer,t.getSize)}(window),function(){$(document).ready(function(){var t,e;return t=$("#su-form"),$("#su-link").click(function(e){return e.preventDefault(),$(this).hide(),t.show()}),e=$('#su-form input[type="submit"]'),e.attr("disabled","disabled"),$("#su-form select").change(function(){return""===$("#su-form select option:selected").text()?e.attr("disabled","disabled"):e.removeAttr("disabled")})})}.call(this),$(document).ready(function(){function t(t){$("#lightbox .contents."+t).show(),$("#lightbox").show()}function e(){$("#lightbox").fadeOut(100,function(){$("#lightbox .contents").hide()})}function n(){var t=$("#application-review-form input[data-disabled]");i()?(t.removeAttr("disabled"),$(".grades-needed").hide()):(t.attr("disabled","disabled"),$(".grades-needed").show())}function i(){var t=$(".application-graded-answer").length,e=$('[type="radio"]:checked').length;return e===t}$("#invite-form-button").click(function(e){e.preventDefault(),t("invite")}),$("#reject-form-button").click(function(e){e.preventDefault(),t("reject")}),$("#lightbox .button.cancel").click(function(){e()}),$(document).keyup(function(t){27===t.keyCode&&e()}),$(document).on("change",".application-graded-answer form",function(){n(),$(this).submit()}),n()}),$(document).ready(function(){$(document).on("click","a[data-company-edit-link]",function(){var t=$(this).hide().closest(".company-section");return t.find("form").show(),t.find(".company-content").hide(),!1}),$(document).on("click",".company-cancel-link",function(){var t=$(this).closest(".company-section");return t.find("form").hide(),t.find(".company-content").show(),t.find(".company-edit-link").show(),!1})}),function(t){var e=["1-10","10-30","30-50","50-100","100-250","250-500","500-5000","5000+"],n=function(t){if("companies"===t.name)return"/companies";if("company"===t.name)return"/companies/"+t.slug;if("category"===t.name)return"/categories/"+t.slug;throw"Bad route data"},i=function(t){var e;if(t.match(/^\/companies\/?$/i))return{name:"companies"};if(t.match(/^\/companies\/all\/?$/i))return{name:"companies",slug:"all"};if(e=t.match(/^\/companies\/([^\/]*)\/?$/i))return{name:"company",slug:e[1].toLowerCase()};if(e=t.match(/^\/categories\/([^\/]*)\/?$/i))return{name:"category",slug:e[1].toLowerCase()};throw"404 - Unknown route"};t.CompanyBrowser=React.createClass({displayName:"CompanyBrowser",api:{message:{send:function(t,e){$.ajax({type:"PATCH",url:"/student_company_statuses/"+t.id,dataType:"JSON",data:{message:e},success:function(t){var e=t.status,n=e.company,i=t.message,s=this.state.messages;s[n.id]?s[n.id].push(i):s[n.id]=[i],this.setState({status:e,messages:s,showComposer:!1})}.bind(this)})},open:function(t,e){this.api.message.findOrLoadByCompany(t.id,function(t){var n=_.findWhere(t,{msgType:e});this.setState({showEmail:n})}.bind(this))},close:function(){this.setState({showEmail:null})},compose:function(){this.setState({showComposer:!0})},cancelCompose:function(){this.setState({showComposer:!1})},findOrLoadByCompany:function(t,e){this.state.messages[t]?e(this.state.messages[t]):$.ajax({url:"/private/messages?company_id="+t,type:"GET",dataType:"JSON",success:function(n){var i=this.state.messages;i[t]=n,this.setState({messages:i}),e(n)}.bind(this)})}},company:{show:function(t,e){this.api.company.findOrLoad(t,e),this.api.company.loadStatus(t)},persist:function(t,e,n){t[e]=n,this.api.company.update(t),t.jobs_url=t.jobsUrl,t.number_of_employees=t.numberOfEmployees,t.number_of_engineers=t.numberOfEngineers,$.ajax({url:t.path,type:"PATCH",dataType:"json",data:{company:t},success:function(t){this.api.company.update(t)}.bind(this)})},update:function(t){var e=this.state.loadedCompanies;e[t.slug]=t,this.setState({loadedCompanies:e})},findOrLoad:function(t,e){var n=this.state.loadedCompanies[t];n?e(n):$.ajax({type:"GET",url:"/companies/"+t+".json",success:function(t){var n=this.state.loadedCompanies;n[t.slug]=t,this.setState({loadedCompanies:n},e.bind(this,t))}.bind(this)})},loadStatus:function(t){$.ajax({type:"GET",url:"/companies/"+t+"/status",dataType:"JSON",success:function(t){this.setState({status:t})}.bind(this)})}},search:{newQuery:function(t){if(!t)return void this.setState({searchQuery:"",searchResults:[]});var e=new RegExp(t,"i"),n={Companies:this.state.companies.filter(function(t){return t.name.match(e)}),Categories:_.filter(this.state.categories,function(t){return t.name.match(e)})};this.setState({searchQuery:t,searchResults:n})},cancelQuery:function(){this.setState({searchQuery:"",searchResults:[]}),$(".search-widget input[type=text]").blur()},getQuery:function(){return this.state.searchQuery},getResults:function(){return this.state.searchResults},selectResult:function(t){t&&(goToPath(t.path),this.api.search.cancelQuery())}}},getInitialState:function(){var t,e,n,s,o,a={};return this.props.loadedCompany&&(n=$.parseJSON(this.props.loadedCompany),a[n.slug]=n),this.props.companiesJson&&(t=$.parseJSON(this.props.companiesJson),e=this.categorize(t),s=_.filter(e,function(t){return t.companies.length>3}),o=_.sample(s,6)),{messages:{},searchQuery:"",searchResults:[],status:this.props.statusJson?$.parseJSON(this.props.statusJson):null,loadedCompanies:a,route:i(location.pathname),currentUser:$.parseJSON(this.props.currentUserJson),companies:t,categories:e,featuredCategories:o}},componentWillMount:function(){this.api=bindAllTo(this,this.api),window.addEventListener("popstate",this.updateRoute)},componentWillUnmount:function(){window.removeEventListener("popstate",this.updateRoute)},render:function(){return React.DOM.div({id:"company-browser-container"},s({api:this.api,currentUser:this.state.currentUser,logoUrl:this.props.logoUrl}),"company"===this.state.route.name?a(null,this.state.showEmail?HSEmailViewer({email:this.state.showEmail,onClose:this.api.message.close},React.DOM.div({dangerouslySetInnerHTML:{__html:this.state.showEmail.bodyHtml}})):"",this.state.showComposer?h({onSend:this.api.message.send.bind(null,this.state.status),company:this.state.loadedCompanies[this.state.route.slug],api:this.api,currentUser:this.state.currentUser}):"",d({api:this.api,company:this.state.loadedCompanies[this.state.route.slug],currentUser:this.state.currentUser,status:this.state.status})):"category"===this.state.route.name?a(null,r({api:this.api,category:this.state.categories[this.state.route.slug]}),m({selected:this.state.route.slug,categories:this.state.categories,api:this.api})):a(null,"all"===this.state.route.slug?React.DOM.div({className:"category"},React.DOM.h2(null,"All companies"),c({api:this.api,companies:this.state.companies})):this.state.featuredCategories.map(function(t){return r({key:t.id,category:t,linkTitle:!0,maxCompanies:4,api:this.api})}.bind(this)),m({selected:this.state.route.slug,categories:this.state.categories,api:this.api})))},categorize:function(t){return t.reduce(function(t,e){return _.each(e.categories,function(n){t[n.slug]?t[n.slug].companies.push(e):t[n.slug]={name:n.name,slug:n.slug,id:n.id,path:n.path,companies:[e]}}),t},{})},updateRoute:function(){var t=i(location.pathname),e={route:t,showComposer:!1,showEmail:null};"company"===t.name?this.api.company.show(t.slug,function(){this.setState(e,f)}.bind(this)):this.setState(e,f)}});var s=React.createClass({displayName:"NavBar",render:function(){return React.DOM.div({className:"navbar"},React.DOM.div({className:"logo-and-nav"},React.DOM.div({className:"company-logo"},React.DOM.a({href:"/private"},React.DOM.img({src:this.props.logoUrl})),React.DOM.strong(null,"Jobs")),this.props.currentUser.isNonEmployer?PushStateLink({className:"nav",href:n({name:"companies"})},"Browse companies"):"",this.props.currentUser.isEmployer?React.DOM.a({href:"/dashboard",className:"nav"},"Dashboard"):""),o({user:this.props.currentUser}),this.props.currentUser.isNonEmployer?React.DOM.div({className:"search-widget"},HSSearchBox({query:this.props.api.search.getQuery(),onNewQuery:this.props.api.search.newQuery,onCancel:this.props.api.search.cancelQuery}),HSSearchResults({results:this.props.api.search.getResults(),onEnter:this.props.api.search.selectResult})):"")}}),o=React.createClass({displayName:"UserMenu",render:function(){return React.DOM.div({className:"user-menu"},React.DOM.a({href:"/settings"},this.props.user.firstName,React.DOM.i({className:"fi-widget"})))}}),a=React.createClass({displayName:"MainContent",render:function(){return React.DOM.div({className:"main-content"},this.props.children)
}}),r=React.createClass({displayName:"Category",shouldComponentUpdate:function(t){return t.category.id!==this.props.category.id},render:function(){var t=this.props.maxCompanies?_.sample(this.props.category.companies,this.props.maxCompanies):this.props.category.companies;return React.DOM.div({className:"category"},React.DOM.h2(null,this.props.linkTitle?PushStateLink({href:n({name:"category",slug:this.props.category.slug})},this.props.category.name):this.props.category.name),c({api:this.props.api,companies:t}))}}),c=React.createClass({displayName:"CompanyCards",render:function(){return React.DOM.ul({className:"company-cards"},this.props.companies.map(function(t){return l({api:this.props.api,company:t,key:t.id})}.bind(this)))}}),l=React.createClass({displayName:"CompanyCard",render:function(){return React.DOM.li(null,PushStateLink({href:n({name:"company",slug:this.props.company.slug})},React.DOM.div({className:"company-card"},React.DOM.img({className:"logo",src:this.props.company.imagePath}),React.DOM.p(null,this.props.company.pitch))))}}),u=React.createClass({displayName:"InterviewNote",getInitialState:function(){return{expanded:!1}},render:function(){var t=this.props.note;return React.DOM.li({className:"interview-note"},HSFace({person:t.author},React.DOM.span(null,t.date),t.author.id===this.props.currentUser.id?React.DOM.p(null,React.DOM.a({href:t.path+"/edit",className:"edit-link"},"edit"),React.DOM.a({href:t.path,className:"delete-link",rel:"nofollow","data-method":"delete","data-confirm":"Are you sure you want to delete this interview note?"},"delete")):""),React.DOM.div({className:"note"},React.DOM.span({dangerouslySetInnerHTML:{__html:this.state.expanded?t.html:t.preview}}),this.state.expanded?React.DOM.a({onClick:this.collapse},"Collapse"):React.DOM.a({onClick:this.expand},"Read more")))},expand:function(){this.setState({expanded:!0})},collapse:function(){this.setState({expanded:!1})}}),p=React.createClass({displayName:"StatusWidget",render:function(){if(!this.props.status)return React.DOM.span(null);var t,e=this.props.currentUser,n=this.props.status;return t=e.company&&e.company.id===n.company.id?React.DOM.p(null,"You can't message ",n.company.name," because you already work there."):n.invitedToInterview?React.DOM.p(null,n.company.name," sent you a message. ",React.DOM.a({onClick:this.props.api.message.open.bind(null,n.company,"invited")},"View message")):n.studentInterested?React.DOM.p(null,"You contacted ",n.company.name," on ",n.studentExpressedInterestAt,". ",React.DOM.a({onClick:this.props.api.message.open.bind(null,n.company,"applied")},"View message")):this.props.company.currentlyHiring?e.canContactCompanies?React.DOM.a({className:"message-button tiny button",onClick:this.props.api.message.compose},"Send a message..."):React.DOM.p(null,"You must be visible to employers and open to new offers to contact companies. ",React.DOM.a({href:"/settings"},"Update settings"),"."):React.DOM.p({className:"not-hiring"},"Note: ",n.company.name," is not actively hiring right now."),React.DOM.div({className:"status-widget"},t)}}),h=React.createClass({displayName:"MessageComposer",getInitialState:function(){return{body:this.defaultBody(),subject:"Interested in "+this.props.company.name}},render:function(){return React.DOM.div({id:"message-composer",className:"open reveal-modal"},React.DOM.div({className:"message"},React.DOM.div({className:"to"},React.DOM.strong(null,"To: "),this.getRecipients()),React.DOM.div({className:"subject"},React.DOM.strong(null,"Subject: "),React.DOM.input({value:this.state.subject,onChange:this.updateSubject})," (via Hacker School)"),React.DOM.textarea({placeholder:"Write your message...",value:this.state.body,onChange:this.updateMessage}),"My links:",React.DOM.ul(null,React.DOM.li(null,React.DOM.a({href:this.props.currentUser.profilePath},"Hacker School profile")),this.props.currentUser.github?React.DOM.li(null,React.DOM.a({href:this.props.currentUser.github},"GitHub profile")):"",this.props.currentUser.links.map(function(t){return React.DOM.li(null,React.DOM.a({href:t.url},t.title))}))),React.DOM.div({className:"message-tips"},React.DOM.h3(null,"Tips"),React.DOM.ul(null,React.DOM.li(null,"Your profile links will automatically be included."),React.DOM.li(null,"Your message will go to all "+this.props.company.name+" employees with Hacker School accounts and email notifications turned on."),React.DOM.li(null,"Write at least a couple of sentences but no more than a few (short) paragraphs."),React.DOM.li(null,"Use proper spelling, grammar, and capitalization."),React.DOM.li(null,"Proof-read your message twice."))),React.DOM.div({className:"buttons"},React.DOM.a({className:"tiny success button",onClick:this.sendMessage},"Send"),React.DOM.a({className:"tiny alert link",onClick:this.confirmCancel},"Cancel")))},defaultBody:function(){return"Hi "+this.getRecipients(!0)+", \n\n\nBest,\n"+this.props.currentUser.firstName},updateSubject:function(t){this.setState({subject:t.target.value})},updateMessage:function(t){this.setState({body:t.target.value})},sendMessage:function(){return this.state.body.replace(/\s+/g,"")===this.defaultBody().replace(/\s+/g,"")?void alert("Please write a message"):void this.props.onSend({body:this.state.body,subject:this.state.subject})},confirmCancel:function(){confirm("Are you sure you want to discard your message?")&&this.props.api.message.cancelCompose()},getRecipients:function(t){var e=this.props.company.employees.filter(function(t){return t.shouldReceiveJobsEmails});return e.length>3?this.props.company.name:toSentence(e.map(function(e){return t?e.firstName:e.name}))}}),d=React.createClass({displayName:"CompanyView",render:function(){var t=this.props.company,i=this.props.currentUser.isEmployer&&this.props.currentUser.company.id==t.id;return React.DOM.div({id:"company-view"},React.DOM.div({className:"row"},React.DOM.div({className:"logo"},React.DOM.img({src:t.imagePath})),React.DOM.div(null,i?HSEditableParagraph({className:"pitch",content:t.pitch,onSave:this.props.api.company.persist.bind(null,t,"pitch")}):React.DOM.p({className:"pitch"},t.pitch))),React.DOM.div({className:"company-details row"},React.DOM.div({className:"vitals"},React.DOM.h2(null,"Vitals"),t.url?React.DOM.p(null,i?HSEditableLink({content:t.url,onSave:this.props.api.company.persist.bind(null,t,"url")},"Home page"):React.DOM.a({href:t.url,target:"_blank"},"Home page")):"",t.jobsUrl?React.DOM.p(null,i?HSEditableLink({content:t.jobsUrl,onSave:this.props.api.company.persist.bind(null,t,"jobsUrl")},"Jobs page"):React.DOM.a({href:t.jobsUrl,target:"_blank"},"Jobs page")):"",React.DOM.h3(null,"Size"),t.numberOfEmployees||t.numberOfEngineers||t.alumni.length?"":"No information",t.numberOfEmployees?i?HSEditableOptions({content:t.numberOfEmployees,options:e,onSave:this.props.api.company.persist.bind(null,t,"numberOfEmployees")},t.numberOfEmployees," people"):React.DOM.p(null,t.numberOfEmployees," people"):"",t.numberOfEngineers?i?HSEditableOptions({content:t.numberOfEngineers,options:e,onSave:this.props.api.company.persist.bind(null,t,"numberOfEngineers")},t.numberOfEngineers," engineers"):React.DOM.p(null,t.numberOfEngineers," engineers"):"",t.alumni.length?React.DOM.p(null,t.alumni.length," Hacker Schoolers"):"",React.DOM.h3(null,"Locations"),i?HSEditableList({items:t.locations,onSave:this.props.api.company.persist.bind(null,t,"locations")}):t.locations.length?React.DOM.ul(null,t.locations.map(function(t){return React.DOM.li(null,t)})):"No information",React.DOM.h3(null,"Categories"),t.categories.length?t.categories.map(function(t){return React.DOM.p(null,this.props.currentUser.isNonEmployer?PushStateLink({href:n({name:"category",slug:t.slug})},t.name):t.name)}.bind(this)):"No information"),React.DOM.div({className:"details"},i?HSEditableMarkdown({content:t.description,html:t.descriptionHtml,onSave:this.props.api.company.persist.bind(null,t,"description")}):React.DOM.div({dangerouslySetInnerHTML:{__html:t.descriptionHtml}})),p({api:this.props.api,currentUser:this.props.currentUser,company:t,status:this.props.status})),React.DOM.div({className:"bottom-panel"},React.DOM.div({className:"employee-list"},React.DOM.h2(null,"Employees with access"),i?React.DOM.p(null,React.DOM.a({href:"/employees"},"Manage employee access")):"",t.employees.length?t.employees.map(function(t){return React.DOM.p(null,t.name," ",t.employerRole?React.DOM.em(null,"(",t.employerRole,")"):"")}):"None"),t.interviewNotes?React.DOM.div({className:"interview-notes"},React.DOM.h2(null,"Interview notes"),t.interviewNotes.length?React.DOM.ol(null,t.interviewNotes.map(function(t){return u({note:t,currentUser:this.props.currentUser})}.bind(this))):React.DOM.p(null,"There aren't any interview notes about ",t.name,". ",React.DOM.a({href:"/private/interview_notes?company="+t.slug},"Write a note"),".")):React.DOM.div({className:"interview-notes"},"\xa0"),React.DOM.div({className:"alumni"},React.DOM.h2(null,"Alumni at ",t.name),React.DOM.ul({className:"alumni-grid"},t.alumni.map(function(t){return React.DOM.li(null,HSFace({person:t}))})))))}}),m=React.createClass({displayName:"CategoryCloud",render:function(){return React.DOM.div({id:"category-cloud"},React.DOM.ul({className:"category-name"},React.DOM.li({key:"all",className:"all"===this.props.selected?"selected":""},PushStateLink({href:n({name:"company",slug:"all"})},"All companies")),_.map(this.props.categories,function(t){return React.DOM.li({key:t.id,className:this.props.selected==t.slug?"selected":""},PushStateLink({href:n({name:"category",slug:t.slug})},t.name))}.bind(this))))}}),f=function(){$(document).scrollTop(0)}}(window),$(document).ready(function(){$(document).on("click",".invite-to-interview-link",function(){return $(this).addClass("activated"),$(this).closest(".invite-and-pass").find(".invite-form").slideDown(),!1}),$(document).on("click",".form-cancel-link",function(){return $(this).closest(".invite-and-pass").find(".invite-to-interview-link").removeClass("activated"),$(this).closest(".invite-form").slideUp(),!1}),$("input#dashboard-filter").fastLiveFilter("#the-list",{selector:"li.row"}).change(),$("input#all-students-filter").fastLiveFilter("#all-students",{selector:"li.person"}).change(),$("input#fav-filter").fastLiveFilter(".fav-list",{selector:"li.row"}).change(),$(document).on("click",".hide-invitation-message",function(){var t=$(this).closest("li.row");return t.find(".invitation-message").html(""),t.find(".view-invitation-message").show(),$(this).hide(),!1})}),CompanyInviteEmployeeForm=React.createClass({displayName:"CompanyInviteEmployeeForm",render:function(){return React.DOM.form({className:"add-employee-form",onSubmit:this.confirmInvite},React.DOM.p(null,React.DOM.strong(null,"Add an employee")),this.props.errors?React.DOM.div({className:"errors"},this.props.errors):"",React.DOM.input({type:"text",placeholder:"First name",name:"first_name",value:this.props.employee.firstName,onChange:this.props.onFieldChange.bind(null,"firstName"),disabled:this.props.submitting}),React.DOM.input({type:"text",placeholder:"Last name",name:"last_name",value:this.props.employee.lastName,onChange:this.props.onFieldChange.bind(null,"lastName"),disabled:this.props.submitting}),React.DOM.input({type:"text",placeholder:"Email",name:"email",value:this.props.employee.email,onChange:this.props.onFieldChange.bind(null,"email"),disabled:this.props.submitting}),React.DOM.input({type:"text",placeholder:"Title",name:"title",value:this.props.employee.title,onChange:this.props.onFieldChange.bind(null,"title"),disabled:this.props.submitting}),React.DOM.input({className:"secondary button",type:"submit",value:"Invite employee",disabled:this.props.submitting}))},confirmInvite:function(t){t.preventDefault();var e={first_name:this.props.employee.firstName,last_name:this.props.employee.lastName,email:this.props.employee.email,employer_role:this.props.employee.title};if(!e.email||!e.first_name||!e.last_name)return void alert("First name, last name, and email are required");var n=confirm("Are you sure you want to invite "+e.email+"? This will send an email.");n&&this.props.addNewEmployee(e)}});var EmployeeManager=React.createClass({displayName:"EmployeeManager",getInitialState:function(){var t=$.parseJSON(this.props.initialAlumni);return{employees:$.parseJSON(this.props.initialEmployees),alumni:t,selectedAlum:t[0],errors:[],statusMessage:null,newEmployeeForm:{firstName:"",lastName:"",email:"",title:""},submitting:!1}},render:function(){return React.DOM.div(null,this.state.errors.length?HSErrorBox({messages:this.state.errors,onClose:this.closeErrorBox}):"",this.state.statusMessage?HSMessageBox({messages:[this.state.statusMessage],onClose:this.closeStatusMessage}):"",this.state.alumni.length?CompanyGrantAlumniAccessForm({onSubmit:this.handleGrantAlumAcess,alumni:this.state.alumni,selectedAlum:this.state.selectedAlum,onChangeSelectedAlum:this.handleChangeSelectedAlum,submitting:this.state.submitting}):"",CompanyInviteEmployeeForm({addNewEmployee:this.addNewEmployee,employee:this.state.newEmployeeForm,onFieldChange:this.handleFieldChange,submitting:this.state.submitting}),React.DOM.table(null,React.DOM.thead(null,React.DOM.tr(null,React.DOM.th(null,"Name"),React.DOM.th(null,"Email"),React.DOM.th(null,"Title"),React.DOM.th(null,"Last seen"),React.DOM.th(null,"\xa0"))),React.DOM.tbody(null,this.state.employees.map(function(t,e){return EmployeeManagerRow({key:t.id,currentUserId:this.props.currentUserId,employee:t,onRevokeAccess:this.confirmRevokeAccess.bind(this,e)})}.bind(this)))))},handleFieldChange:function(t,e){var n=this.state.newEmployeeForm;n[t]=e.target.value,this.setState({newEmployeeForm:n})},addNewEmployee:function(t){this.setState({submitting:!0}),$.ajax({url:"/employees",type:"POST",dataType:"json",data:{employee:t},success:function(e){this.setState({employees:e,errors:[],submitting:!1,newEmployeeForm:{firstName:"",lastName:"",email:"",title:""},statusMessage:t.first_name+" "+t.last_name+" ("+t.email+") has been invited to hackerschool.com"})}.bind(this),error:function(t){var e=$.parseJSON(t.responseText);this.setState({errors:e.errors,statusMessage:null,submitting:!1})}.bind(this)})},confirmRevokeAccess:function(t){var e=this.state.employees[t],n=confirm("Are you sure you want to revoke "+e.name+"'s access? They will no longer be able to see "+this.props.companyName+"'s dashboard or edit its profile.");n&&this.revokeAccess(e)},revokeAccess:function(t){var e=this.state.employees.filter(function(e){return e.id!==t.id});this.setState({employees:e}),$.ajax({url:"/employees/"+t.id,type:"DELETE",dataType:"json",error:function(t){var e=$.parseJSON(t.responseText);this.setState({errors:e.errors,statusMessage:null})}.bind(this),success:function(){var e=this.state.alumni.concat([t]).sort(fullNameSortCompare);this.setState({alumni:e,selectedAlum:this.state.selectedAlum||e[0],statusMessage:t.name+"'s access has been revoked.",errors:[]})}.bind(this)})},handleGrantAlumAcess:function(){this.setState({submitting:!0});var t=this.state.selectedAlum,e=this.state.alumni.filter(function(e){return e.id!==t.id});$.ajax({url:"/employees/"+t.id,type:"PUT",dataType:"json",success:function(n){this.setState({employees:n,alumni:e,selectedAlum:e[0],statusMessage:t.name+" now has employer access.",errors:[],submitting:!1})}.bind(this),error:function(){this.setState({submitting:!1,errors:["Sorry, something went wrong. Please reload the page and try again."],statusMessage:null})}.bind(this)})},handleChangeSelectedAlum:function(t){this.setState({selectedAlum:t})},closeErrorBox:function(){this.setState({errors:[]})},closeStatusMessage:function(){this.setState({statusMessage:null})}}),CompanyGrantAlumniAccessForm=React.createClass({displayName:"CompanyGrantAlumniAccessForm",render:function(){return React.DOM.form({className:"add-hacker-schooler-form",onSubmit:this.onSubmit},React.DOM.p(null,React.DOM.strong(null,"Grant access to a Hacker School alum")),React.DOM.select({value:this.props.selectedAlum.id,onChange:this.onChange,disabled:this.props.submitting},this.props.alumni.map(function(t){return React.DOM.option({value:t.id},t.name)})),React.DOM.input({className:"secondary button",type:"submit",value:"Grant access",disabled:this.props.submitting}))},onChange:function(t){var e=parseInt(t.target.value),n=_.findWhere(this.props.alumni,{id:e});this.props.onChangeSelectedAlum(n)},onSubmit:function(t){t.preventDefault(),this.props.onSubmit()}}),EmployeeManagerRow=React.createClass({displayName:"EmployeeManagerRow",render:function(){var t=this.props.employee;return React.DOM.tr(null,React.DOM.td(null,t.name),React.DOM.td(null,t.email),React.DOM.td(null,t.employerRole),React.DOM.td(null,t.accountIsPending?React.DOM.span({className:"pending"},"invited"):t.lastActivityAt),React.DOM.td(null,this.props.currentUserId!=t.id?React.DOM.a({href:"#",onClick:this.revokeAccess},"Revoke access"):""))},revokeAccess:function(t){t.preventDefault(),this.props.onRevokeAccess()}});$(document).ready(function(){$("#follow-up-message-field form").submit(function(){return""===$(this).find("textarea").val()?(alert("Please enter a message."),!1):void 0})}),$(document).ready(function(){window.companyAutocomplete("#interview_note_form_company"),$("#select-note-company").change(function(){$("#select-note-company-form").submit()}),$(".note-validate-me").tinyValidation({validateOnKeyUp:!0})}),$(document).on("click","a.add-note",function(){var t=$(this).closest("li.mobile-section"),e=t.find("textarea");return e.focus(function(){setTimeout(function(){$("html, body").scrollTop(e.offset().top)},50)}),t.find("a.add-note").hide(),t.find(".note-box").show(0,function(){e.focus()}),!1}),$(document).on("click","a.cancel-note",function(){var t=$(this).closest("li.mobile-section");return closeNoteBox(t),!1}),function(){$(document).ready(function(){var t;return $("#new_message,#set-password").tinyValidation({validateOnKeyUp:!0}),$("#person_password").keypress(function(){return $("#person_password_confirmation").val("")}),$("input#person-filter").fastLiveFilter("#batches",{selector:"li.person",callback:function(){return $("#batches > li > ul").each(function(){return 0===$(this).find("li.person:visible").length?$(this).prev("h2").hide():$(this).prev("h2").show()})}}).change(),$(".project-form").hide(),$(".update-project").click(function(t){return t.preventDefault(),$(".update-project").hide(),$(".create-project").hide(),$(this).closest("li").find(".project-form").show(),$(this).closest("li").addClass("active")}),$(".create-project").click(function(t){return t.preventDefault(),$(this).hide(),$(".update-project").hide(),$("#new_project").show(),$(".create-form").addClass("active")}),$(".project-form .button span.cancel").click(function(t){return t.preventDefault(),$(".active .project-form").hide(),$(".update-project").show(),$(".create-project").show(),$(".active").removeClass("active")}),$(".create-form .button span.cancel").click(function(t){return t.preventDefault(),$("#new_project").hide(),$(".update-project").show(),$(".create-project").show(),$(".active").removeClass("active")}),t=function(){var t,e,n,i;for(i=[],n=$("li.projects").size(),t=0;n>t;)e=$("li.projects")[t].id,i.push(e),t++;return $.ajax({url:"/projects/sort",type:"POST",data:{projects:i}})},$("#sortable").sortable({stop:function(){return t()}})})}.call(this),function(){$(document).ready(function(){return $(".validate-me").tinyValidation({validateOnKeyUp:!0})})}.call(this),function(){$(document).ready(function(){return $(".settings-validate-me").tinyValidation({validateOnKeyUp:!0,validators:{twitterOrEmpty:function(t){var e;return e=/^\w{1,15}$|^$/,e.test(t)?!0:"invalid twitter handle"}}}),$("#person_password").keypress(function(){return $("#person_password_confirmation").val("")}),$("form a.add_nested_fields").trigger("click"),$("#settings_visible_to_employers").change(function(){return $(this).is(":checked")?$("#settings_open_to_new_job").prop("disabled",!1):$("#settings_open_to_new_job").prop("disabled",!0).prop("checked",!1)}),$("#settings_visible_to_employers").is(":checked")||$("#settings_open_to_new_job").prop("disabled",!0),window.companyAutocomplete("#settings_company_name")}),window.companyAutocomplete=function(t){var e,n,i,s,o;return o=function(t){return t.toLowerCase().replace(/[ ]/g,"")},e=$(t),1===e.length?(i=e.data("suggest"),s=function(){var t,e,s;for(s=[],t=0,e=i.length;e>t;t++)n=i[t],s.push(o(n));return s}(),e.autocomplete({source:function(t,e){var n;return n=function(e){var n,i,s,a,r;return r=$.ui.autocomplete.escapeRegex(o(t.term)),a=new RegExp("^"+r),s=$.grep(e,function(t){return a.test(o(t))}),s.length>0?s:(i=new RegExp(r),n=$.grep(e,function(t){return i.test(o(t))}))},e(n(i,t.term))},select:function(t,n){return e.val(n.item.label),e.trigger("input")}}).bind("keyup input",function(){return i=e.data("suggest")}).trigger("keyup")):void 0}}.call(this),function(t){var e={ERROR:"error",POPUP:"popup",STARTED:"started",PROCESSING:"processing",AUTHENTICATED:"authenticated",NOT_STARTED:"not started"};t.GitHubFormRow=React.createClass({displayName:"GitHubFormRow",getInitialState:function(){return{status:this.statusFromServerStatusAndAccessToken(this.props.initialStatus,this.props.accessToken),login:this.props.gitHubLogin}},statusFromServerStatusAndAccessToken:function(t,n){return n?e.AUTHENTICATED:t?t:e.NOT_STARTED},shouldPoll:function(){return this.state.status===e.POPUP||this.state.status===e.STARTED||this.state.status===e.PROCESSING},componentDidMount:function(){this.shouldPoll()&&this.startPolling()},componentWillUnmount:function(){this.stopPolling()},poll:function(){$.ajax({url:this.props.statusUrl,dataType:"json",success:function(t){var e=this.statusFromServerStatusAndAccessToken(t.status,t.authenticated);this.setState({status:e,login:t.github},function(){this.shouldPoll()||this.stopPolling()}.bind(this))}.bind(this),error:function(t,e,n){console.error(e,n.toString())}.bind(this)})},startPolling:function(){this.state.intervalId||this.setState({intervalId:setInterval(this.poll,3e3)})},stopPolling:function(){clearInterval(this.state.intervalId),this.setState({intervalId:null})},onStartAuthentication:function(){this.showPopup(),this.setState({status:e.POPUP},this.startPolling)},onRevokeGitHubAccess:function(){this.setState({status:e.NOT_STARTED})},showPopup:function(){window.open("/github_auth/redirect","GitHub OAuth","resizeable=yes,status=yes,menubar=yes,location=yes,width=1000,height=700")},render:function(){var t={};return t[e.NOT_STARTED]="Opens a popup for GitHub authentication",t[e.ERROR]="Error authenticating with GitHub - try again",t[e.POPUP]="Click to reopen - please allow this popup",t[e.STARTED]="Log in to your GitHub account in the popup",t[e.PROCESSING]="Waiting for background process",t[e.AUTHENTICATED]="You're authenticated with GitHub",React.DOM.div(null,React.DOM.label({htmlFor:"GitHub"}," GitHub "),this.state.status===e.AUTHENTICATED?React.DOM.span({className:"form-field-text"},React.DOM.span({className:"github-login"},this.state.login),RevokeButton({icon:this.props.revokeIcon,onRevoke:this.onRevokeGitHubAccess,revokeUrl:this.props.statusUrl})):GitHubButton({status:this.state.status,onStartAuthentication:this.onStartAuthentication,startUrl:this.props.startUrl}),React.DOM.div({className:"github-auth-flow settings-directions directions"},t[this.state.status]))}}),t.GitHubButton=React.createClass({displayName:"GitHubButton",authenticate:function(){$.ajax({url:this.props.startUrl,type:"POST",success:function(){this.props.onStartAuthentication()}.bind(this),error:function(t,e,n){console.error(e,n.toString())}.bind(this)})},render:function(){var t={};return t[e.NOT_STARTED]="Authenticate",t[e.ERROR]="Authenticate",t[e.POPUP]="Waiting for popup...",t[e.STARTED]="Waiting for GitHub...",t[e.PROCESSING]="Authenticating...",t[e.AUTHENTICATED]="Authenticated",React.DOM.div({className:"github_login form-field-button "+(this.props.status!==e.AUTHENTICATED?"big-black-button":""),onClick:this.authenticate},t[this.props.status])}}),t.RevokeButton=React.createClass({displayName:"RevokeButton",revoke:function(){$.ajax({url:this.props.revokeUrl,type:"DELETE",success:function(){this.props.onRevoke()}.bind(this),error:function(t,e,n){console.error(e,n.toString())}})},render:function(){return React.DOM.span({className:"revoke-github",onClick:this.revoke},React.DOM.img({alt:"revoke",src:this.props.icon}),"revoke")}})}(window);